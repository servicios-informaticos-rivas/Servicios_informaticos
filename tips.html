<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tips para Celulares - Servicios Informáticos Rivas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    .solution-box { margin-top: 15px; padding: 15px; border-radius: 8px; background-color: #e9f7ef; display: none; }
    .hard-reset { color: red; font-weight: bold; }
  </style>
</head>
<body>

<header class="bg-primary text-white text-center p-4">
  <h1>Servicios Informáticos Rivas</h1>
  <p>Tips y soluciones para celulares</p>
</header>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Menú</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navMenu">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link" href="index.html"><i class="bi bi-house"></i> Inicio</a></li>
        <li class="nav-item"><a class="nav-link" href="reparacion.html"><i class="bi bi-tools"></i> Reparación de PC</a></li>
        <li class="nav-item"><a class="nav-link" href="laptops.html"><i class="bi bi-laptop"></i> Laptops</a></li>
        <li class="nav-item"><a class="nav-link" href="repuestos.html"><i class="bi bi-cpu"></i> Venta de Repuestos</a></li>
        <li class="nav-item"><a class="nav-link" href="camaras.html"><i class="bi bi-camera-video"></i> Cámaras de Seguridad</a></li>
        <li class="nav-item"><a class="nav-link" href="redes.html"><i class="bi bi-wifi"></i> Puntos de Red</a></li>
        <li class="nav-item"><a class="nav-link" href="apk.html"><i class="bi bi-android2"></i> Creación de APK</a></li>
        <li class="nav-item"><a class="nav-link active" href="tips.html"><i class="bi bi-phone"></i> Tips para Celulares</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="container my-5">
  <div class="text-center mb-4">
    
    <img src="imagenes/logo.png" alt="Imagen Celulares" class="img-fluid mb-3" style="max-height:150px;">
    
    <h2>Selecciona tu celular y problema</h2>
  </div>

  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="mb-3"><label>Marca</label><select id="brandSelect" class="form-select"><option value="">-- Elige una marca --</option></select></div>
      <div class="mb-3"><label>Modelo</label><select id="modelSelect" class="form-select" disabled><option value="">-- Primero selecciona la marca --</option></select></div>
      <div class="mb-3"><label>Problema</label><select id="problemSelect" class="form-select" disabled><option value="">-- Primero selecciona el modelo --</option></select></div>

      <div class="solution-box" id="solutionBox"><h5>Solución paso a paso:</h5><ol id="solutionSteps"></ol></div>
    </div>
  </div>
</main>

<footer class="bg-dark text-white text-center py-3">© 2025 Servicios Informáticos Rivas</footer>

<script>
// URL del Google Sheet publicado como CSV
const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSHKGWIOfxqSo9ZVT_AqDXxasu7o84WWgxJcGu1g5kOE0re4VJY8LNcgGA78-HEK7wLdAalj-lH-C8t/pub?gid=0&single=true&output=csv";

// Variables
let data = [];
const brandSelect = document.getElementById("brandSelect");
const modelSelect = document.getElementById("modelSelect");
const problemSelect = document.getElementById("problemSelect");
const solutionBox = document.getElementById("solutionBox");
const solutionSteps = document.getElementById("solutionSteps");

// Cargar datos del Sheet
async function loadData() {
  try {
    const res = await fetch(sheetUrl);
    const text = await res.text();
    const rows = text.split(/\r?\n/).map(r => r.split(","));
    // Asumo que la primera fila es encabezado: Marca,Modelo,Problema,Solucion
    data = rows.slice(1).map(r => ({
      marca: r[0]?.trim(),
      modelo: r[1]?.trim(),
      problema: r[2]?.trim(),
      solucion: r[3]?.trim()
    })).filter(d => d.marca && d.modelo && d.problema && d.solucion);

    // Llenar marcas
    const marcas = [...new Set(data.map(d => d.marca))].sort();
    marcas.forEach(m => brandSelect.innerHTML += `<option value="${m}">${m}</option>`);
  } catch (err) {
    console.error("Error cargando datos:", err);
    alert("No se pudieron cargar los datos del Google Sheet.");
  }
}

// Eventos
brandSelect.addEventListener('change', () => {
  const mar = brandSelect.value;
  modelSelect.innerHTML = `<option value="">-- Elige un modelo --</option>`;
  problemSelect.innerHTML = `<option value="">-- Primero selecciona el modelo --</option>`;
  solutionBox.style.display = 'none';
  modelSelect.disabled = !mar;

  if (mar) {
    const modelos = [...new Set(data.filter(d => d.marca === mar).map(d => d.modelo))];
    modelos.sort().forEach(mo => modelSelect.innerHTML += `<option value="${mo}">${mo}</option>`);
  }
});

modelSelect.addEventListener('change', () => {
  const mar = brandSelect.value, mo = modelSelect.value;
  problemSelect.innerHTML = `<option value="">-- Elige un problema --</option>`;
  solutionBox.style.display = 'none';
  problemSelect.disabled = !mo;

  if (mo) {
    const problemas = data.filter(d => d.marca === mar && d.modelo === mo);
    problemas.forEach(item => {
      problemSelect.innerHTML += `<option value="${item.problema}">${item.problema}</option>`;
    });
  }
});

problemSelect.addEventListener('change', () => {
  const mar = brandSelect.value, mo = modelSelect.value, pr = problemSelect.value;
  const items = data.filter(d => d.marca === mar && d.modelo === mo && d.problema === pr);

  if (items.length > 0) {
    solutionSteps.innerHTML = "";
    items.forEach(item => {
      item.solucion.split(/\. /).forEach(step => {
        if(step.trim()==="") return;
        const li = document.createElement('li');
        li.textContent = step;
        if(step.toLowerCase().includes('hard reset')) li.classList.add('hard-reset');
        solutionSteps.appendChild(li);
      });
    });
    solutionBox.style.display = 'block';
  }
});

// Iniciar
loadData();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

